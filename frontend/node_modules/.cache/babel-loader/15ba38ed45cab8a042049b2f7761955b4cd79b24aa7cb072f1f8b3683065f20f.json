{"ast":null,"code":"import _regeneratorRuntime from\"/home/razo/projects/React-Nodejs-MongoDb-Daytask/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/razo/projects/React-Nodejs-MongoDb-Daytask/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/razo/projects/React-Nodejs-MongoDb-Daytask/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import\"./Popup.css\";import FloatingLabel from'react-bootstrap/FloatingLabel';import Form from'react-bootstrap/Form';import Button from'react-bootstrap/Button';import{baseUrl}from\"../services/url\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PopupReset=function PopupReset(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),message=_useState4[0],setMessage=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),validated=_useState6[0],setValidated=_useState6[1];var handlePassword=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var form,res,resJson;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:form=event.currentTarget;event.preventDefault();event.stopPropagation();if(!(form.checkValidity()===false)){_context.next=6;break;}_context.next=22;break;case 6:_context.prev=6;_context.next=9;return fetch(baseUrl+\"/user/reset\",{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify({email:email})});case 9:res=_context.sent;_context.next=12;return res.json();case 12:resJson=_context.sent;if(res.status===200){setEmail(\"\");setMessage(resJson.message);}else{setMessage(resJson.message);}_context.next=22;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](6);setMessage(\"תקלה בשליחה\");event.preventDefault();event.stopPropagation();console.log(_context.t0);case 22:setValidated(true);event.preventDefault();event.stopPropagation();case 25:case\"end\":return _context.stop();}}},_callee,null,[[6,16]]);}));return function handlePassword(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"background\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"add\",children:[/*#__PURE__*/_jsxs(Form,{noValidate:true,validated:validated,onSubmit:handlePassword,children:[/*#__PURE__*/_jsx(FloatingLabel,{controlId:\"floatingInput\",label:\"\\u05D3\\u05D5\\u05D0\\u05E8 \\u05D0\\u05DC\\u05E7\\u05D8\\u05E8\\u05D5\\u05E0\\u05D9\",children:/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"email\",placeholder:\"\\u05D3\\u05D5\\u05D0\\u05E8 \\u05D0\\u05DC\\u05E7\\u05D8\\u05E8\\u05D5\\u05E0\\u05D9\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"\\u05E9\\u05DB\\u05D7\\u05EA\\u05D9 \\u05E1\\u05D9\\u05E1\\u05DE\\u05D0\"}),message]}),/*#__PURE__*/_jsx(Button,{className:\"back\",onClick:function onClick(){props.setIsOpen(false);},style:{marginTop:\"10px\"},children:\"\\u05D7\\u05D6\\u05D5\\u05E8\"})]})});};export default PopupReset;","map":{"version":3,"names":["React","useState","FloatingLabel","Form","Button","baseUrl","PopupReset","props","email","setEmail","message","setMessage","validated","setValidated","handlePassword","event","form","currentTarget","preventDefault","stopPropagation","checkValidity","fetch","method","headers","body","JSON","stringify","res","json","resJson","status","console","log","e","target","value","setIsOpen","marginTop"],"sources":["/home/razo/projects/React-Nodejs-MongoDb-Daytask/frontend/src/components/PopupReset.jsx"],"sourcesContent":["import React ,{useState} from \"react\";\nimport \"./Popup.css\"\nimport FloatingLabel from 'react-bootstrap/FloatingLabel';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport { baseUrl } from \"../services/url\";\n\n\nconst PopupReset = (props) => {\n\n    const [email, setEmail] = useState(\"\");\n    const [message, setMessage] = useState(\"\");\n    const [validated, setValidated] = useState(false);\n\n\n    const handlePassword = async (event) => {\n        const form = event.currentTarget;\n        event.preventDefault();\n        event.stopPropagation();\n        if (form.checkValidity() === false) {\n        } else {\n            try {\n                let res = await fetch(baseUrl + \"/user/reset\", {\n                    method: \"POST\",\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify({\n                        email: email\n                    }),\n                });\n                let resJson = await res.json();\n                if (res.status === 200) {\n                    setEmail(\"\");\n                    setMessage(resJson.message);\n                } else {\n                    setMessage(resJson.message);\n                }\n            } catch (err) {\n                setMessage(\"תקלה בשליחה\");\n                event.preventDefault();\n                event.stopPropagation();\n                console.log(err);\n            }\n        }\n        setValidated(true);\n        event.preventDefault();\n        event.stopPropagation();\n    };\n\n\n    return (\n        <div className=\"background\">\n            <div className=\"add\">\n                <Form noValidate validated={validated} onSubmit={handlePassword}>\n                    <FloatingLabel controlId=\"floatingInput\" label=\"דואר אלקטרוני\">\n                        <Form.Control required type=\"email\" placeholder=\"דואר אלקטרוני\" value={email} onChange={(e) => setEmail(e.target.value)} />\n                    </FloatingLabel>\n                    <Button type=\"submit\">שכחתי סיסמא</Button>\n                    {message}\n                </Form>\n                <Button className=\"back\" onClick={() => {props.setIsOpen(false)}} style={{marginTop: \"10px\"}}>חזור</Button>\n\n            </div>\n        </div>\n    );\n}\n\nexport default PopupReset;\n"],"mappings":"6bAAA,MAAOA,MAAK,EAAGC,QAAQ,KAAO,OAAO,CACrC,MAAO,aAAa,CACpB,MAAOC,cAAa,KAAM,+BAA+B,CACzD,MAAOC,KAAI,KAAM,sBAAsB,CACvC,MAAOC,OAAM,KAAM,wBAAwB,CAC3C,OAASC,OAAO,KAAQ,iBAAiB,CAAC,wFAG1C,GAAMC,WAAU,CAAG,QAAbA,WAAU,CAAIC,KAAK,CAAK,CAE1B,cAA0BN,QAAQ,CAAC,EAAE,CAAC,wCAA/BO,KAAK,eAAEC,QAAQ,eACtB,eAA8BR,QAAQ,CAAC,EAAE,CAAC,yCAAnCS,OAAO,eAAEC,UAAU,eAC1B,eAAkCV,QAAQ,CAAC,KAAK,CAAC,yCAA1CW,SAAS,eAAEC,YAAY,eAG9B,GAAMC,eAAc,4FAAG,iBAAOC,KAAK,yIACzBC,IAAI,CAAGD,KAAK,CAACE,aAAa,CAChCF,KAAK,CAACG,cAAc,EAAE,CACtBH,KAAK,CAACI,eAAe,EAAE,CAAC,KACpBH,IAAI,CAACI,aAAa,EAAE,GAAK,KAAK,8FAGVC,MAAK,CAAChB,OAAO,CAAG,aAAa,CAAE,CAC3CiB,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACjBlB,KAAK,CAAEA,KACX,CAAC,CACL,CAAC,CAAC,QANEmB,GAAG,sCAOaA,IAAG,CAACC,IAAI,EAAE,SAA1BC,OAAO,eACX,GAAIF,GAAG,CAACG,MAAM,GAAK,GAAG,CAAE,CACpBrB,QAAQ,CAAC,EAAE,CAAC,CACZE,UAAU,CAACkB,OAAO,CAACnB,OAAO,CAAC,CAC/B,CAAC,IAAM,CACHC,UAAU,CAACkB,OAAO,CAACnB,OAAO,CAAC,CAC/B,CAAC,iFAEDC,UAAU,CAAC,aAAa,CAAC,CACzBI,KAAK,CAACG,cAAc,EAAE,CACtBH,KAAK,CAACI,eAAe,EAAE,CACvBY,OAAO,CAACC,GAAG,aAAK,CAAC,QAGzBnB,YAAY,CAAC,IAAI,CAAC,CAClBE,KAAK,CAACG,cAAc,EAAE,CACtBH,KAAK,CAACI,eAAe,EAAE,CAAC,qEAC3B,kBA/BKL,eAAc,4CA+BnB,CAGD,mBACI,YAAK,SAAS,CAAC,YAAY,uBACvB,aAAK,SAAS,CAAC,KAAK,wBAChB,MAAC,IAAI,EAAC,UAAU,MAAC,SAAS,CAAEF,SAAU,CAAC,QAAQ,CAAEE,cAAe,wBAC5D,KAAC,aAAa,EAAC,SAAS,CAAC,eAAe,CAAC,KAAK,CAAC,2EAAe,uBAC1D,KAAC,IAAI,CAAC,OAAO,EAAC,QAAQ,MAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,2EAAe,CAAC,KAAK,CAAEN,KAAM,CAAC,QAAQ,CAAE,kBAACyB,CAAC,QAAKxB,SAAQ,CAACwB,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,EAAC,EAAG,EAC/G,cAChB,KAAC,MAAM,EAAC,IAAI,CAAC,QAAQ,2EAAqB,CACzCzB,OAAO,GACL,cACP,KAAC,MAAM,EAAC,SAAS,CAAC,MAAM,CAAC,OAAO,CAAE,kBAAM,CAACH,KAAK,CAAC6B,SAAS,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,CAAE,CAACC,SAAS,CAAE,MAAM,CAAE,sCAAc,GAEzG,EACJ,CAEd,CAAC,CAED,cAAe/B,WAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}