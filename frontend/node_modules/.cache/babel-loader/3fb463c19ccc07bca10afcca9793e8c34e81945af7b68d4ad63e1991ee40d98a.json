{"ast":null,"code":"import _regeneratorRuntime from\"/home/razo/projects/React-Nodejs-MongoDb-Daytask/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/razo/projects/React-Nodejs-MongoDb-Daytask/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/razo/projects/React-Nodejs-MongoDb-Daytask/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useState}from\"react\";import\"./add.css\";import FloatingLabel from'react-bootstrap/FloatingLabel';import Form from'react-bootstrap/Form';import Button from'react-bootstrap/Button';import{baseUrl}from\"../services/url\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Add=function Add(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),content=_useState4[0],setContent=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),validated=_useState8[0],setValidated=_useState8[1];var handleAdd=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var form,token,myHeaders,res,resJson;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:form=event.currentTarget;event.preventDefault();event.stopPropagation();if(!(form.checkValidity()===false)){_context.next=6;break;}_context.next=26;break;case 6:_context.prev=6;token=localStorage.getItem('token');myHeaders=new Headers();myHeaders.append('Content-Type','application/json');myHeaders.append('Authorization',token);_context.next=13;return fetch(baseUrl+\"/task/add\",{method:\"POST\",headers:myHeaders,body:JSON.stringify({name:name,content:content})});case 13:res=_context.sent;_context.next=16;return res.json();case 16:resJson=_context.sent;if(res.status===200){setMessage(resJson.message);props.setAdd(false);props.addTask();}else{setMessage(resJson.message);}_context.next=26;break;case 20:_context.prev=20;_context.t0=_context[\"catch\"](6);setMessage(\"תקלה במכשיר שלך, רענן את הדף ונסה שוב\");event.preventDefault();event.stopPropagation();console.log(_context.t0);case 26:setValidated(true);event.preventDefault();event.stopPropagation();case 29:case\"end\":return _context.stop();}}},_callee,null,[[6,20]]);}));return function handleAdd(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"background\",children:/*#__PURE__*/_jsx(\"div\",{className:\"add\",children:/*#__PURE__*/_jsxs(Form,{noValidate:true,validated:validated,onSubmit:handleAdd,children:[/*#__PURE__*/_jsx(FloatingLabel,{controlId:\"floatingInput\",label:\"\\u05DE\\u05E9\\u05D9\\u05DE\\u05D4\",children:/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"text\",placeholder:\"\\u05DE\\u05E9\\u05D9\\u05DE\\u05D4\",value:name,onChange:function onChange(e){return setName(e.target.value);}})}),/*#__PURE__*/_jsx(FloatingLabel,{controlId:\"floatingPassword\",label:\"\\u05E2\\u05D3 \\u05E9\\u05E2\\u05D4\",children:/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"text\",placeholder:\"\\u05E2\\u05D3 \\u05E9\\u05E2\\u05D43\",value:content,onChange:function onChange(e){return setContent(e.target.value);}})}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"\\u05D4\\u05D5\\u05E1\\u05E3\"}),message,/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return props.setAdd(false);},children:\"\\u05D7\\u05D6\\u05D5\\u05E8\"})]})})});};export default Add;","map":{"version":3,"names":["React","useState","FloatingLabel","Form","Button","baseUrl","Add","props","name","setName","content","setContent","message","setMessage","validated","setValidated","handleAdd","event","form","currentTarget","preventDefault","stopPropagation","checkValidity","token","localStorage","getItem","myHeaders","Headers","append","fetch","method","headers","body","JSON","stringify","res","json","resJson","status","setAdd","addTask","console","log","e","target","value"],"sources":["/home/razo/projects/React-Nodejs-MongoDb-Daytask/frontend/src/components/Add.jsx"],"sourcesContent":["import React from \"react\";\nimport { useState } from \"react\";\nimport \"./add.css\"\nimport FloatingLabel from 'react-bootstrap/FloatingLabel';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport { baseUrl } from \"../services/url\";\n\nconst Add = (props) => {\n\n    const [name, setName] = useState(\"\");\n    const [content, setContent] = useState(\"\");\n    const [message, setMessage] = useState(\"\");\n\n    const [validated, setValidated] = useState(false);\n\n    const handleAdd = async (event) => {\n        const form = event.currentTarget;\n        event.preventDefault();\n        event.stopPropagation();\n        if (form.checkValidity() === false) {\n        } else {\n            try {\n                let token = localStorage.getItem('token');\n                const myHeaders = new Headers();\n                myHeaders.append('Content-Type', 'application/json');\n                myHeaders.append('Authorization', token);\n                let res = await fetch(baseUrl + \"/task/add\", {\n                    method: \"POST\",\n                    headers: myHeaders,\n                    body: JSON.stringify({\n                        name: name,\n                        content: content\n                    }),\n                    \n                });\n                let resJson = await res.json();\n                if (res.status === 200) {\n                    setMessage(resJson.message);\n                    props.setAdd(false);\n                    props.addTask()\n                } else {\n                    setMessage(resJson.message);\n                }\n            } catch (err) {\n                setMessage(\"תקלה במכשיר שלך, רענן את הדף ונסה שוב\");\n                event.preventDefault();\n                event.stopPropagation();\n                console.log(err);\n            }\n        }\n        setValidated(true);\n        event.preventDefault();\n        event.stopPropagation();\n    };\n\n    return (\n        <div className=\"background\">\n            <div className=\"add\">\n                <Form noValidate validated={validated} onSubmit={handleAdd}>\n                    <FloatingLabel controlId=\"floatingInput\" label=\"משימה\">\n                        <Form.Control required type=\"text\" placeholder=\"משימה\" value={name} onChange={(e) => setName(e.target.value)} />\n                    </FloatingLabel>\n                    <FloatingLabel controlId=\"floatingPassword\" label=\"עד שעה\">\n                        <Form.Control required type=\"text\" placeholder=\"עד שעה3\" value={content} onChange={(e) => setContent(e.target.value)} />\n                    </FloatingLabel>\n                    <Button type=\"submit\">הוסף</Button>\n                    {message}\n                    <Button onClick={()=> props.setAdd(false)}>חזור</Button>\n                </Form>\n            </div>\n        </div>\n    );\n}\n\nexport default Add;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}